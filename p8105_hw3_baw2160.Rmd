---
title: "p8105_hw3_baw2160"
author: "Bryce Wong"
date: "October 8, 2018"
output: github_document
---

```{r}
knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

library(tidyverse)
library(ggridges)
library(patchwork)

theme_set(theme_bw() + theme(legend.position = "bottom"))
```
## Problem One:

### install.packages("devtools")
```{r}
devtools::install_github("p8105/p8105.datasets")
library(p8105.datasets)
```
### Read and clean data:
* Formatted the data to use appropriate variable names.
* Focused on the “Overall Health” topic.
* Include only responses from "Excellent" to "Poor"
* Organized responses as a factor taking levels from “Excellent” to “Poor”

```{r}
brfss_data = brfss_smart2010 %>% 
  filter(Topic == "Overall Health") %>% 
  rename(Location_State = Locationabbr, Location_County = Locationdesc, Proportion = Data_value) %>%
  mutate(
    Response = as.factor(Response)
  )
```

### Answering some questions:

* In 2002, which states were observed at 7 locations?
```{r}
county_distinct = distinct(brfss_data, Location_County, .keep_all = TRUE) %>% 
  count(Location_State) %>% 
  filter(n == 7)
```

**Answer:** `r county_distinct$Location_State`

* Make a “spaghetti plot” that shows the number of observations in each state from 2002 to 2010.
* Make a table showing, for the years 2002, 2006, and 2010, the mean and standard deviation of the proportion of “Excellent” responses across locations in NY State.
* For each year and state, compute the average proportion in each response category (taking the average across locations in a state). Make a five-panel plot that shows, for each response category separately, the distribution of these state-level averages over time.
